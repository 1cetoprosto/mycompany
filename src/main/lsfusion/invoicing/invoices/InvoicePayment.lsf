MODULE InvoicePayment;

REQUIRE Invoice, Payment;

NAMESPACE Invoicing;

invoice 'Накладная' = DATA Invoice (Payment);

paid 'Оплачено' (Invoice i) = GROUP SUM amount(Payment p) IF invoice(p) = i AND paid(p);

EXTEND FORM invoices   
    PROPERTIES(i) READONLY paid  
;

EXTEND FORM invoice
    PROPERTIES (in) paid
;